{% extends "template.html" %}
{% block content %}

    {% if not student or student.type == 'instructor' %}
        <p> invalid student </p>
    {% else %}

    {% with messages = get_flashed_messages(with_categories = True) %}
        {% if messages %}

            {% for cat, message in messages %}
                <div class='flash {{cat}}'>{{message}}</div>
            {% endfor %}

        {% endif %}
    {%endwith%}

        <!-- Form to add grades -->
        <h4>Add Grade</h4>

        <form action="/view/student/{{student.username}}" method="post">

            <label for="gradeAssName">Assessment Name</label>
            <br>
            <input type="text" required placeholder="Test 1" name="gradeAssName"/>

            <br>

            <label for="gradeWeight">Weight (%)</label>
            <br>
            <input type="number" required placeholder="15" name="gradeWeight"/>

            <br>

            <label for="gradeScore">Student Score (%)</label>
            <br>
            <input type="number" required placeholder="85" name="gradeScore"/>

            <br>

            <button type="submit">Add Grade</button>


        </form>

        <hr>

        <!-- Existing grades -->
        <h3>{{student.name}}'s Grades</h3>


        <!-- use table here? -->
        {% if grades %}

            {% for grade in grades %}

                <div class="row">
                    <p>Name: {{grade.ass_name}} </p>
                    <p>Score: {{grade.score}}%</p>
                    <p>Weight: {{grade.weight}}%</p>
                </div>

                <form action="/edit/student/{{student.username}}/grade/{{grade.id}}" method="get">
                    <button type="submit">Edit</button>
                </form>

                <hr>

            {% endfor %}

        {% else %}

            <p>This student does not have any grades yet.</p>

        {% endif %}


    {% endif %}


{% endblock %}